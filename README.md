# 비디오 스트림 추출 및 이미지 인코딩 스크립트

이 Python 스크립트는 MP4 비디오 파일에서 비디오와 오디오 스트림을 추출하고, 이를 바이너리 데이터로 변환한 후 압축하여 이미지로 인코딩합니다. 이후 이미지에서 원본 데이터를 복원하여 원본 비디오 파일을 재생성합니다.

## 주요 기능

- **스트림 추출**: FFmpeg를 사용하여 MP4 파일에서 비디오(H.264)와 오디오(AAC) 스트림을 추출합니다.
- **바이너리 변환 및 압축**: 추출된 스트림을 바이너리 데이터로 변환하고 zlib을 이용해 압축합니다.
- **이미지 인코딩**: 압축된 바이너리 데이터를 PNG 이미지로 인코딩하여 저장합니다.
- **데이터 복원**: 이미지에서 압축된 바이너리 데이터를 복원하고, 이를 통해 원본 스트림을 재생성합니다.
- **비디오 재생성**: 복원된 비디오와 오디오 스트림을 결합하여 원본 비디오 파일을 재생성합니다.

## 필요 환경

- **Python 3.x**
- **FFmpeg**: 시스템에 설치되어 있어야 하며, 명령 프롬프트 또는 터미널에서 `ffmpeg` 명령을 사용할 수 있어야 합니다.

### Python 패키지

- `numpy`
- `Pillow` (PIL)

`requirements.txt` 파일에 필요한 패키지가 명시되어 있습니다.

## 설치 방법

1. **FFmpeg 설치**

   - FFmpeg를 [공식 웹사이트](https://ffmpeg.org/download.html)에서 다운로드하여 설치하세요.
   - 설치 후 명령 프롬프트나 터미널에서 `ffmpeg -version`을 입력하여 정상 설치 여부를 확인합니다.

2. **Python 패키지 설치**

   - `requirements.txt` 파일이 있는 디렉토리에서 다음 명령어를 실행합니다:

     ```bash
     pip install -r requirements.txt
     ```

## 사용 방법

1. **스크립트 및 비디오 파일 준비**

   - 이 스크립트 파일(`main.py`)과 동일한 디렉토리에 입력 비디오 파일(`input_video.mp4`)을 위치시킵니다.
   - 만약 다른 이름의 비디오 파일을 사용할 경우, `main.py` 내의 `input_video_path` 변수를 수정하세요.

2. **스크립트 실행**

   - 터미널이나 명령 프롬프트에서 스크립트가 있는 디렉토리로 이동한 후 다음 명령어를 실행합니다:

     ```bash
     python main.py
     ```

3. **결과 확인**

   - 스크립트 실행 후 다음과 같은 파일들이 생성됩니다:
     - `video_stream.h264`: 추출된 비디오 스트림 파일
     - `audio_stream.aac`: 추출된 오디오 스트림 파일
     - `video_compressed.png`: 비디오 스트림이 인코딩된 이미지 파일
     - `audio_compressed.png`: 오디오 스트림이 인코딩된 이미지 파일
     - `restored_video.mp4`: 복원된 비디오 파일

## 주의 사항

- **파일 크기 감소의 한계점**

  - 비디오와 오디오 스트림은 이미 고도로 압축된 데이터이기 때문에 추가적인 압축이나 이미지 변환을 통해 파일 크기를 크게 줄이기 어렵습니다.
  - 이미지로 변환하는 과정은 데이터의 형태를 변경하거나 은닉하는 목적이며, 파일 크기 감소를 보장하지 않습니다.

- **이미지 형식**

  - 이미지 파일은 PNG 형식으로 저장됩니다. PNG는 무손실 압축을 제공하므로 데이터 손실 없이 이미지를 저장할 수 있습니다.
  - JPEG 등의 손실 압축 이미지는 데이터 복원에 문제가 발생하므로 사용하지 않습니다.

- **FFmpeg 경로 설정**

  - FFmpeg가 시스템 PATH에 추가되어 있지 않으면 스크립트에서 FFmpeg를 호출할 수 없습니다.
  - FFmpeg 설치 시 시스템 환경 변수에 FFmpeg 경로를 추가하거나, 스크립트에서 FFmpeg 실행 파일의 전체 경로를 지정하세요.

## 파일 구조

